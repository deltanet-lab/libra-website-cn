---
id: libra-cli
title: Libra命令行界面
---

本指南介绍了如何使用Libra命令行界面（CLI）客户端与Libra区块链进行交互。 CLI作为交互式外壳程序被调用。 它提供了创建帐户，铸造硬币，执行转账和查询区块链的基本命令。 您可以通过指定节点的主机名，使用CLI客户端与测试网上，本地Libra区块链或远程区块链上的验证程序节点进行交互。

## 调用
有三种方法可以调用Libra命令行界面客户端。

### 通过CLI客户端连接到测试网络
要通过CLI连接到testnet，可以使用便捷脚本来调用CLI，而无需指定参数。 要调用它，请转到`libra`目录并运行：

```bash
./scripts/cli/start_cli_testnet.sh
```

### 运行本地Libra网络并启动CLI客户端
要启动本地Libra网络并生成连接到该本地网络的CLI客户端，请运行：

```bash
cargo run -p libra_swarm -- -s

```
-s选项使CLI在本地Libra网络启动后运行。 请注意，这可能需要几分钟才能构建，然后再开始。

### 运行CLI客户端以连接到任何Libra网络
要调用CLI客户端并自行配置，请运行：

```bash
cargo run -p client --bin client -- [OPTIONS] --host <host> --validator_set_file <validator_set_file>

```

#### 选项

用于运行CLI客户端命令以连接到任何Libra网络的选项为：

* `-m | --faucet_key_file_path` &mdash; 水龙头帐户生成的密钥对的路径。 水龙头账户可用于铸造硬币。 如果未指定该参数，将为您生成一个新的密钥对，并将其放置在临时目录中。 要手动生成密钥对，请使用generate_keypair：`cargo run -p generate_keypair -- -o <output_file_path>`。
* `-f | --faucet_server` &mdash; 运行水龙头服务的主机。 如果未传递，则将从host参数派生。
* `-a | —-host` &mdash; CLI连接到的目标主机。
* `-p | -—port` &mdash; 客户端连接目标Libra区块链的公共端口，默认值为30307。
* `-n | --mnemonic_file` &mdash; 从中加载用于用户帐户地址/密钥生成的助记词的文件位置。 如果未传递，libra_wallet将在当前目录中生成一个新的助记符文件。
* `-s | --validator_set_file` &mdash; 要从中加载受信任验证程序配置的文件位置。 它用于验证验证者查询响应中的验证者签名。 该文件至少应包括客户端信任的所有验证器的公钥-通常应为网络上的所有验证器。 &mdash;要连接到测试网，请使用“ libra / scripts / cli / trusted_peers.config.toml”。 可以由libra-config生成以进行本地测试：`cargo run --bin libra-config`，但是首选方法是简单地使用libra-swarm来运行本地网络。
File location from which to load config of trusted validators. It is used to verify validator signatures in validator query response. The file should at least include public key of all validators trusted by the client &mdash; which should typically be all validators on the network. To connect to testnet, use 'libra/scripts/cli/trusted_peers.config.toml'. Can be generated by libra-config for local testing: `cargo run --bin libra-config` but the preferred method is to simply use libra-swarm to run local networks.

## 命令

一旦使用前面提到的三个命令中的任何一个启动，便可以使用以下CLI命令：

```plaintext
major_command subcommand [options]
```

如果仅输入主命令，它将显示该命令的帮助信息。 主要命令可以是以下任意一项：

---

 #### `account | a` &mdash;  与帐户相关的操作。 子命令包括：

  `create | c` &mdash;  创建具有私钥/公钥对的随机帐户。 帐户信息将仅保存在内存中。 创建的帐户将不会保存到链中。

       Usage:
        create|c

  `list | la` &mdash; 打印所有已创建或加载的帐户。

     Usage:
        list|la

  `recover | r <file_path>` &mdash; 恢复所有通过`account write`命令写入文件的帐户。

     Usage:
        recover|r <file_path>
     Arguments:
         file_path - File path from which to load mnemonic recover seed.  Must have been written via `account write`

  `write | w <file path>` &mdash; 将Libra钱包助记符恢复种子保存到磁盘。 这将允许通过`account recover`命令来恢复帐户。

     Usage:
        write|w <file_path>
     Arguments:
         file_path - File path at which to save the mnemonic recovery seed to disk.


  `<mint | m> | <mintb| mb>` &mdash; 将硬币铸造到该帐户。 后缀'b'表示阻塞执行方式。 如果指定了阻塞执行（使用后缀'b'），则CLI将查询链，直到事务完成/可用。 其他“阻塞”子命令也是如此。

      Usage:
        mint|mint|m|b <receiver_account_ref_id>|<receiver_account_address> <number_of_coins>
      Arguments:
          receiver_account_ref_id | receiver_account_address - The receiver account to mint the coins to.
                If the receiver account does not exist, it will be created first.
                Either receiver_account_address or receiver_account_ref_id (an internal index of
                the account in the CLI client) can be used to specify receiver account (as in
                other commands). If gas is being charged, the account that sent this mint transaction
                (currently preloaded genesis account) pays for the gas.
          number_of_coins - The number of coins to be minted to the receiver account.

---

#### `transfer | transferb | t | tb` &mdash; 将硬币从一个帐户转移到另一个帐户。 后缀“ b”用于阻止。

    Usage:
        transfer|transferb|t|tb <sender_account_address>|<sender_account_ref_id> <receiver_account_address>|<receiver_account_ref_id> <number_of_coins> [gas_unit_price (default=0)] [max_gas_amount (default 10000)]
    Arguments:
        sender_account_address | sender_account_ref_id - The account from which this transfer transaction
            is sent. The sender account pays for the gas.
        receive_account_address | receiver_account_ref_id - The account to which this transaction sends coins.
            If the receiver account does not exist, it will be created first. The sender will pay for
            gas required for both account creation and coin transfer.
        number_of_coins - The number of coins transferred to receiver account.
        gas_unit_price - The unit price to pay for gas.
        max_gas_amount - Max units of gas user is willing to pay for this transaction.

---

#### `query | q` &mdash; 从目标链查询数据。 所有查询操作都被阻止。 子命令包括：

`balance | b` &mdash; 获取帐户的当前余额

     Usage:
        balance | b <account_ref_id>|<account_address>
     Arguments:
         account_ref_id | account_address - The account to query balance for.

`sequence | s` &mdash; 获取帐户的当前序列号。

      Usage:
        sequence | s <account_ref_id>|<account_address> [reset_sequence_number=true|false]
      Arguments:
          account_ref_id | account_address - The account to get current/latest sequence number.
          reset_sequence_number - If the sequence number known locally by the CLI differs from the
                value known on chain, this will reset the local sequence number to to on-chain
                value.  This is useful when a user encounters an invalid sequence number error.

`account_state | as` &mdash; 获取帐户的最新状态。

      Usage:
        account_state | as <account_ref_id>|<account_address>
      Arguments:
          account_ref_id | account_address - The account to query latest state.

`txn_acc_seq | ts` &mdash; 通过帐户和序列号获取已提交的交易。

      Usage:
        txn_acc_seq | ts <account_ref_id>|<account_address> <sequence_number> <fetch_events=true|false>
      Arguments:
          account_ref_id | account_address - The account to query committed transaction.
          sequence_number - The sequence number of committed transaction.
          fetch_events - Set to true to fetch events emitted by this transaction.

`txn_range | tr` &mdash; 按范围获取已提交的交易。

      Usage:
        txn_range | tr <start_version> <limit> <fetch_events=true|false>
      Arguments:
          start_version - The version to query the transaction from.
          limit - The maximum number of transactions to query.
          fetch_events - Set to true to fetch events emitted by each transaction.

`event | ev` &mdash; 通过帐户和路径获取事件。

      Usage:
        event | ev <account_ref_id>|<account_address> <sent|received> <start_sequence_number> <ascending=true|false> <limit>
      Arguments:
          account_ref_id | account_address - The account to query events from.
          sent | received - Fetch sent or received events for this account.
                Note that this will later evolve into selecting any event path.
          start_sequence_number - The sequence number of events to query starting from.
          ascending - The direction of query from start_sequence_number.
          limit - The maximum number of events to query.

---

**`quit | q!` &mdash; 退出CLI。 没有子命令。**

---

**`help | h` &mdash; 打印帮助信息。没有子命令。**

### 在测试网上创建账户/铸币

CLI实现的帐户创建会生成一个本地密钥对，但在区块链上不会创建任何内容。 为了在区块链上创建一个账户：

* 将硬币转移到您要创建的地址。 如果接收者帐户不存在，则将首先创建接收者帐户，然后再转账硬币。 发件人为帐户创建和转帐付款。
* 发起一个铸币交易并将铸造的币发送到一个帐户。 如果该帐户不存在，则首先创建该帐户，然后再铸造硬币。 与其他交易不同，不存在的帐户本身可以要求进行铸币交易。 对于测试网，一个帐户可以铸造多少个硬币没有明确的限制。 它旨在允许用户创建硬币以在测试网上进行实验。


